<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Altica Intranet</title>
</head>
<body>
<script>
    var myMessage = new MessageEvent('message', {
        data : 'awaiting data'
    });

    var head = document.getElementsByTagName('head')[0];
    var js = document.createElement("script");
    js.type = "text/javascript";

    window.addEventListener("message", function (event) {
        var data = event.data;
        eventt = event;
        console.log('type received is ' + event.type);
        console.log('data received is ' + event.data);
        if (data === 'open') {
            console.log('data is valid');
            js.src = "main.dart.js";
        } else {
            console.log('data is not valid');
        }
    });
    window.dispatchEvent(myMessage);
    head.appendChild(js);

</script>
</body>
</html>